<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="homescript.js"></script>
    <link rel="stylesheet" href="homestyle.css">
    <title>Live Location Tracker</title>
  <style>
    #map {
      height: 500px;
      width: 100%;
    }
  </style>
</head>
<body>
    <div class="selectotion">
        <label for="problem">Problem Type :</label>
        <select name="problem" id="problem">
            <option value="select">Select</option>
            <option value="pothole">Pothole/Damage Roads</option>
            <option value="road_damage">Drainage Blockage/Waterlogging</option>
            <option value="street_light">Street Light Issue</option>
            <option value="traffic_signal">Tree Falling/Over Grown Trees</option>
            <option value="traffic_signal">Solid waste/Garbage Accumulation</option>
        </select>
    </div>
    <div>
        <label class="problem">Problem Description :</label>
        <textarea class="description"></textarea>
    </div>
    <div>
        <h2>My Live Location</h2>
  <div id="map"></div>

  <script>
    let map, marker;

    function initMap() {
      // Default location (center of India until user allows location)
      const defaultLocation = { lat: 20.5937, lng: 78.9629 };

      // Initialize map
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 6,
        center: defaultLocation,
      });

      // Add marker
      marker = new google.maps.Marker({
        position: defaultLocation,
        map: map,
        title: "Your Location",
      });

      if (navigator.geolocation) {
        navigator.geolocation.watchPosition(
          (position) => {
            const liveLocation = {
              lat: position.coords.latitude,
              lng: position.coords.longitude,
            };

            // Update marker position
            marker.setPosition(liveLocation);
            map.setCenter(liveLocation);
            map.setZoom(15);
          },
          () => {
            alert("Unable to fetch your location.");
          }
        );
      } else {
        alert("Geolocation not supported by this browser.");
      }
    }
  </script>

  <!-- Google Maps API (Replace YOUR_API_KEY with your actual key) -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
  </script>
    </div>
</body>
</html>